@:noDoc @:dox(hide)
class hx.doctest.internal.adapters.UTestDocTestAdapter extends hx.doctest.internal.adapters.DocTestAdapter {

	public function new() {}

	public function getFrameworkName() {
		return "utest";
	}

	@:has_untyped
	public function generateTestFail(assertion:hx.doctest.internal.DocTestAssertion, errorMsg:String) {
		return cast {expr : haxe.macro.ExprDef.EBlock([{expr : haxe.macro.ExprDef.ECall({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CIdent("utest")), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 603, 608)}, "Assert"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 603, 615)}, "fail"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 603, 620)}, [{expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CString("" + assertion.expression + " --> " + errorMsg, haxe.macro.StringLiteralKind.SingleQuotes)), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 621, 660)}, haxe.macro.Context.makeExpr(assertion.getPosInfos(null), $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 664, 689))]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 603, 690)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 589, 701)};
	}

	@:has_untyped
	public function generateTestSuccess(assertion:hx.doctest.internal.DocTestAssertion) {
		return cast {expr : haxe.macro.ExprDef.EBlock([{expr : haxe.macro.ExprDef.ECall({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EField({expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CIdent("utest")), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 833, 838)}, "Assert"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 833, 845)}, "pass"), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 833, 850)}, [{expr : haxe.macro.ExprDef.EConst(haxe.macro.Constant.CString("" + assertion.file.fileName + ":" + assertion.lineNumber + " [OK] " + assertion.expression, haxe.macro.StringLiteralKind.SingleQuotes)), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 851, 932)}, haxe.macro.Context.makeExpr(assertion.getPosInfos(null), $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 936, 961))]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 833, 962)}]), pos : $__mk_pos__("/usr/local/lib/haxeLibrary/haxe-doctest/git/src/hx/doctest/internal/adapters/UTestDocTestAdapter.hx", 819, 973)};
	}

	public function onFinish(contextFields:Array<haxe.macro.Field>) {
		var cls = haxe.macro.Context.getLocalClass().get();
		cls.meta.remove(":utestProcessed");
		{
			var ` = 0;
			while (` < contextFields.length) {
				var f = contextFields[`];
				++ `;
				if (f.name == "__initializeUtest__") {
					contextFields.remove(f);
					break;
				};
			};
		};
	}
}